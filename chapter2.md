# 第2章 控制结构和函数

##### 

##### 2.1 条件表达式

Scala的每个表达式都有值，比如`val s = if (x > 0) 1 else -1`，s的值是1或-1.

Scala的每个表达式都有一个类型，该类型是各个分支的公共超类型，比如`val s = if (x > 0) "positive" else -1`，String和Int的公共超类型就是Any。

如果else部分缺失了，会用一个Unit类来表示else的分支，写作\(\)。即`val s = if (x > 0) 1`等同于`val s = if (x > 0) 1 else ()`。可以把Unit当做void来使用，但从技术上讲，void表示无值，Unit表示一个“无值”的值。

##### 2.2 语句终止

Scala不需要分号，除非在同一行内有多段代码。

当代码很长时，比较好的一个建议是在操作符之后进行换行，这样解释器会知道这不是一个语句的结尾。

##### 2.3 块表达式和赋值

在Scala中，{}块包含一系列表达式，其结果也是一个表达式，块中最后一个表达式的值就是块的值。这种特性在一个val值初始化需要很多步骤的时候很有效。

要注意的是，赋值语句是没有值的---其实是一个Unit值。所以`x = y = 1`这样的表达式在Scala中是行不通的，x的值是\(\)而不是你所期望的1。

##### 2.4 输入和输出

Scala有3种输出形式：

* print\("Answer: "\)
* println\(42\)
* C风格的格式化字符串`printlf("Hello, %s! You are %d years old.\n", "Fred", 42)`

Scala有9种输入形式：

* readLine：可带一个参数，作为提示字符串，用来读入一行字符串。
* readInt, readFloat...：共8种，命名均为read+数据类型的形式，用来读入其他数据类型。

##### 2.5 循环

Scala的while循环与其他语言一样。

Scala没有类似Java的for循环（初始化变量;变量是否满足条件;更新变量），只有`for (i <- 表达式)`这种结构，如：

```scala
for (i <- 1 to n) {
      r = r * i
    }
```

`1 to n`会返回一个1到n的Range（包含1与n），循环会遍历这个集合中的每一个值，如果使用`1 until n`则不会包含上限n。

在这里，并没有对i进行var或al的指定，该变量的类型是集合的元素类型。

Scala没有break与continue。

##### 2.6 高级for循环与推导式

可以用**变量&lt;-表达式**的形式生成多个生成器，用分号隔开。如：

`for (i <- 1 to 3; j <- 1 to 3) print((10 * i + j) + " ")`

每个生成器都可以带一个**守卫**，以if开头的Boolean表达式：

`for (i <- 1 to 3; j <- 1 to 3 if i != j) print((10 * i + j) + " ")`

注意if之前没有分号。

可以使用任意多的定义，引入可以在循环中使用的变量。

`for (i <- 1 to 3; from = 4 - i; j <- from to 3) print((10 * i + j) + " ")`

##### 2.7 函数



